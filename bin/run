#!/usr/bin/env node
const { readFileSync: read } = require('fs')
const { resolve } = require('path')
const JSON5 = require('json5')
const tsConfigPaths = require('tsconfig-paths')

const config = read(resolve(__dirname, '../tsconfig.json')).toString('utf-8')
const tsconfig = JSON5.parse(config)

tsConfigPaths.register({
  baseUrl: resolve(__dirname, '../'),
  paths: tsconfig.compilerOptions.paths,
})

require('@oclif/command')
  .run()
  .then(require('@oclif/command/flush'))
  .catch(require('@oclif/errors/handle'))
